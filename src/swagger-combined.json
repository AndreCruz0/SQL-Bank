{
	"openapi": "3.0.3",
	"info": {
		"title": "API Produtos e Categorias",
		"version": "1.0.0",
		"description": "API para gerenciamento de produtos, categorias e transações"
	},
	"tags": [
		{
			"name": "Produtos",
			"description": "Operações relacionadas a produtos"
		},
		{
			"name": "Categorias",
			"description": "Operações relacionadas a categorias"
		},
		{
			"name": "Transações",
			"description": "Operações relacionadas a transações"
		}
	],
	"paths": {
		"/products/register": {
			"post": {
				"tags": ["Produtos"],
				"summary": "Cadastrar novo produto",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/ProductInput" }
						}
					}
				},
				"responses": {
					"201": {
						"description": "Produto criado com sucesso",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ProductResponse" }
							}
						}
					},
					"400": {
						"description": "Erro na requisição",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					},
					"422": {
						"description": "Erro de validação",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ValidationErrorResponse"
								}
							}
						}
					},
					"500": {
						"description": "Erro interno do servidor",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					},
					"504": {
						"description": "Gateway Timeout",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					}
				}
			}
		},
		"/products/list": {
			"get": {
				"tags": ["Produtos"],
				"summary": "Listar todos os produtos",
				"responses": {
					"200": {
						"description": "Lista de produtos",
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": { "$ref": "#/components/schemas/Product" }
								}
							}
						}
					},
					"500": {
						"description": "Erro interno do servidor",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					}
				}
			}
		},
		"/products/refreshTransactions": {
			"get": {
				"tags": ["Transações"],
				"summary": "Atualizar transações (integração com MongoDB)",
				"responses": {
					"200": {
						"description": "Transações atualizadas com sucesso",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"message": {
											"type": "string",
											"example": "Transações atualizadas com sucesso!"
										}
									}
								}
							}
						}
					},
					"500": {
						"description": "Erro interno do servidor",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					}
				}
			}
		},
		"/products/bulk-update": {
			"put": {
				"tags": ["Produtos"],
				"summary": "Atualizar vários produtos em lote",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "array",
								"items": { "$ref": "#/components/schemas/ProductUpdate" }
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Produtos atualizados com sucesso",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"message": {
											"type": "string",
											"example": "Produtos atualizados com sucesso!"
										}
									}
								}
							}
						}
					},
					"422": {
						"description": "Erro de validação",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ValidationErrorResponse"
								}
							}
						}
					},
					"500": {
						"description": "Erro interno do servidor",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					}
				}
			}
		},
		"/products/category/{id}": {
			"get": {
				"tags": ["Produtos"],
				"summary": "Buscar produtos por categoria",
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"description": "ID da categoria",
						"required": true,
						"schema": { "type": "string" }
					}
				],
				"responses": {
					"200": {
						"description": "Produtos da categoria",
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": { "$ref": "#/components/schemas/Product" }
								}
							}
						}
					},
					"400": {
						"description": "ID inválido",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					},
					"500": {
						"description": "Erro interno do servidor",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					}
				}
			}
		},
		"/products/{id}": {
			"get": {
				"tags": ["Produtos"],
				"summary": "Buscar produto por ID",
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"description": "ID do produto",
						"required": true,
						"schema": { "type": "string" }
					}
				],
				"responses": {
					"200": {
						"description": "Produto encontrado",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/Product" }
							}
						}
					},
					"400": {
						"description": "ID inválido",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					},
					"500": {
						"description": "Erro interno do servidor",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					}
				}
			}
		},

		"/categories/create": {
			"post": {
				"tags": ["Categorias"],
				"summary": "Criar nova categoria",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/CategoryInput" }
						}
					}
				},
				"responses": {
					"201": {
						"description": "Categoria criada com sucesso",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/CategoryResponse" }
							}
						}
					},
					"400": {
						"description": "Erro na requisição",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					},
					"422": {
						"description": "Erro de validação",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ValidationErrorResponse"
								}
							}
						}
					},
					"500": {
						"description": "Erro interno do servidor",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					}
				}
			}
		},
		"/categories/list": {
			"get": {
				"tags": ["Categorias"],
				"summary": "Listar todas as categorias",
				"responses": {
					"200": {
						"description": "Lista de categorias",
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": { "$ref": "#/components/schemas/Category" }
								}
							}
						}
					},
					"500": {
						"description": "Erro interno do servidor",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					}
				}
			}
		},
		"/categories/{id}": {
			"get": {
				"tags": ["Categorias"],
				"summary": "Buscar categoria por ID",
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"description": "ID da categoria",
						"required": true,
						"schema": { "type": "string" }
					}
				],
				"responses": {
					"200": {
						"description": "Categoria encontrada",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/Category" }
							}
						}
					},
					"400": {
						"description": "ID inválido",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					},
					"500": {
						"description": "Erro interno do servidor",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					}
				}
			}
		},
		"/categories/update/{id}": {
			"put": {
				"tags": ["Categorias"],
				"summary": "Atualizar categoria",
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"description": "ID da categoria",
						"required": true,
						"schema": { "type": "string" }
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/CategoryUpdate" }
						}
					}
				},
				"responses": {
					"200": {
						"description": "Categoria atualizada com sucesso",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"message": {
											"type": "string",
											"example": "Item atualizado com sucesso"
										}
									}
								}
							}
						}
					},
					"400": {
						"description": "Erro na requisição",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					},
					"422": {
						"description": "Erro de validação",
						"content": {
							"application/json": {
								"$ref": "#/components/schemas/ValidationErrorResponse"
							}
						}
					},
					"500": {
						"description": "Erro interno do servidor",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/ErrorResponse" }
							}
						}
					}
				}
			}
		}
	},
	"components": {
		"schemas": {
			"ProductInput": {
				"type": "object",
				"required": ["name", "category_id", "price", "qty"],
				"properties": {
					"name": { "type": "string", "example": "Produto X" },
					"category_id": { "type": "integer", "example": 1 },
					"price": { "type": "number", "format": "float", "example": 100.5 },
					"qty": { "type": "integer", "example": 50 }
				}
			},
			"Product": {
				"type": "object",
				"properties": {
					"id": { "type": "integer", "example": 10 },
					"name": { "type": "string", "example": "Produto X" },
					"category_id": { "type": "integer", "example": 1 },
					"price": { "type": "number", "format": "float", "example": 100.5 },
					"qty": { "type": "integer", "example": 50 }
				}
			},
			"ProductResponse": {
				"type": "object",
				"properties": {
					"message": {
						"type": "string",
						"example": "Produto criado com sucesso!"
					},
					"data": { "$ref": "#/components/schemas/Product" }
				}
			},
			"ProductUpdate": {
				"type": "object",
				"required": ["id"],
				"properties": {
					"id": { "type": "integer", "example": 10 },
					"name": { "type": "string" },
					"category_id": { "type": "integer" },
					"price": { "type": "number", "format": "float" },
					"qty": { "type": "integer" }
				}
			},
			"CategoryInput": {
				"type": "object",
				"required": ["name"],
				"properties": {
					"name": { "type": "string", "example": "Eletrônicos" }
				}
			},
			"Category": {
				"type": "object",
				"properties": {
					"id": { "type": "integer", "example": 1 },
					"name": { "type": "string", "example": "Eletrônicos" }
				}
			},
			"CategoryResponse": {
				"type": "object",
				"properties": {
					"message": {
						"type": "string",
						"example": "Categoria criada com sucesso"
					},
					"data": { "$ref": "#/components/schemas/Category" }
				}
			},
			"CategoryUpdate": {
				"type": "object",
				"properties": {
					"name": { "type": "string" }
				}
			},
			"ErrorResponse": {
				"type": "object",
				"properties": {
					"message": { "type": "string", "example": "Mensagem de erro" }
				}
			},
			"ValidationErrorResponse": {
				"type": "object",
				"properties": {
					"message": { "type": "string", "example": "Erro de validação" },
					"issues": {
						"type": "object",
						"example": { "field": "Campo obrigatório" }
					}
				}
			}
		}
	}
}
